<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>DeBugger - Bug Swatter Idle Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Link to CSS styles -->
  <link rel="stylesheet" href="../CSS/style.css" />
</head>

<body>
  <!-- Title Screen -->
  <div id="title-screen">
    <button id="btn-about" class="about-button"> ? </button>
    <button id="btn-leaderboard" class="leaderboard-button">üèÜ</button>
    <div id="title-content">
      <img id="title-logo" src="../IMG/menu/Debuggerlogo.png" alt="Debugger Logo">

      <div id="title-buttons">
        <button id="btn-debug" class="title-button">
          <img src="../IMG/menu/Debug.png" alt="DEBUG">
        </button>
        <!--<button id="btn-journal">
          <img src="../IMG/menu/Journal.png" alt="Journal">
        </button> (add back later) -->
        <button id="btn-options" class="title-button">
          <img src="../IMG/menu/Options.png" alt="Options">
        </button>
        <button id="btn-quit-game" class="title-button">
          <img src="../IMG/menu/Quit.png" alt="Quit">
        </button>
      </div>
    </div>
  </div>

  <!-- Main Game Container -->
  <div id="game-container">
    <header id="game-header">
      <button id="pause-button"> || </button>

      <div id="score-container">
        <img src="../IMG/menu/Score.png" alt="Score" class="score-label">
        <span id="score-value" class="score-value">0</span>
      </div>

      <div id="logo-wrapper">
        <img id="game-logo" src="../IMG/menu/Debuggerlogo.png" alt="Game Logo">
      </div>

      <div id="stats">
        <div class="stat-item">
          <img src="../IMG/menu/Money.png" alt="Money" class="stat-label">
          <span id="money-value" class="stat-value">$0.00</span>
        </div>

        <div class="stat-item">
          <img src="../IMG/menu/Kills.png" alt="Kills" class="stat-label">
          <span id="bugs-killed-value" class="stat-value">0</span>
        </div>
      </div>

    </header>

    <main id="game-main">
      <!-- Weapons panel on the left -->
      <aside id="weapon-panel">
        <div class="panel-title">
          <img src="../IMG/menu/Tools.png" alt="Tools" class="panel-title-img">
        </div>
        <button id="equip-swatter" class="weapon-button">
          <img src="../IMG/weapons/swatter/swatter.png" alt="" class="weapon-icon">
        </button>

        <button id="equip-hammer" class="weapon-button">
          <img src="../IMG/weapons/hammer/hammer.png" alt="" class="weapon-icon">
        </button>

        <!-- More weapon buttons can be added here -->

        <!-- Weapon Stats Pop-Up -->
        <div id="weapon-tooltip"></div>

      </aside>

      <!-- Play area in the center -->
      <div id="play-column">
        <div id="play-area">
          <!-- Bug Meter + Label -->
          <div id="bug-meter-container">
            <div id="bug-meter-label"><strong>BUG METER</strong></div>
            <div id="bug-meter">
              <div id="bug-meter-fill"></div>
            </div>
          </div>

          <!-- Swatter cursor -->
          <img id="swatter-cursor" src="../IMG/swatter.png" alt="Swatter">
        </div>
        <div id="ability-section">
          <div class="panel-title">
            <img src="../IMG/menu/Abilities.png" alt="Abilities" class="panel-title-img">
          </div>
          <div id="ability-bar">
            <button class="ability-button" data-ability-id="bugserk">
              <img src="../IMG/abilities/bugserk.png" alt="Bugserk" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Bugserk</span>
            </button>

            <button class="ability-button" data-ability-id="bug-tape">
              <img src="../IMG/abilities/bug_tape.png" alt="Bug Tape" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Bug Tape</span>
            </button>

            <button class="ability-button" data-ability-id="bug-drone">
              <img src="../IMG/abilities/bug_drone.png" alt="Cordyceps" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Cordyceps</span>
            </button>

            <button class="ability-button" data-ability-id="immortal-snail">
              <img src="../IMG/abilities/immortal_snail.png" alt="ImmortalSnail" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Immortal Snail</span>
            </button>

            <button class="ability-button" data-ability-id="singularity">
              <img src="../IMG/abilities/singularity.png" alt="Singularity" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Singularity</span>
            </button>

            <button class="ability-button" data-ability-id="slapshot">
              <img src="../IMG/abilities/slapshot.png" alt="Slapshot" class="ability-icon"
                onerror="this.onerror=null; this.src='../IMG/abilities/placeholder.png'">
              <span class="ability-label">Slapshot</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Upgrades panel on the right -->
      <aside id="upgrade-panel">
        <div class="panel-title">
          <img src="../IMG/menu/Upgrades.png" alt="" class="panel-title-img">
        </div>

        <div id="upgrade-list">
          <!-- 1. Increase ATK -->
          <div class="upgrade-card" data-upgrade-id="increase-atk">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/increase_attack.png" alt="Increase ATK" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="increase-atk">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Increase ATK</h3>
              <p class="upgrade-desc">
                Increases the base damage of the currently held weapon by +1.
              </p>
            </div>
          </div>

          <!-- 2. Increase RAD -->
          <div class="upgrade-card" data-upgrade-id="increase-rad">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/increase_rad.png" alt="Increase RAD" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="increase-rad">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Increase RAD</h3>
              <p class="upgrade-desc">
                Increases the radius of the currently held weapon by +5.
              </p>
            </div>
          </div>

          <!-- 3. Decrease WCD -->
          <div class="upgrade-card" data-upgrade-id="decrease-wcd">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/decrease_wcd.png" alt="Decrease WCD" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="decrease-wcd">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Decrease WCD</h3>
              <p class="upgrade-desc">
                Decreases the cooldown between strikes of the currently held weapon by -0.1s.
              </p>
            </div>
          </div>

          <!-- 4. Decrease ACD -->
          <div class="upgrade-card" data-upgrade-id="decrease-acd">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/decrease_acd.png" alt="Decrease ACD" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="decrease-acd">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Decrease ACD</h3>
              <p class="upgrade-desc">
                Decreases the cooldown between using abilities by -0.1s.
              </p>
            </div>
          </div>

          <!-- 5. Increase $$$ -->
          <div class="upgrade-card" data-upgrade-id="increase-money">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/increase_money.png" alt="Increase $$$" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="increase-money">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Increase $$$</h3>
              <p class="upgrade-desc">
                Increases amount of money gained per bug killed by x1.2.
              </p>
            </div>
          </div>

          <!-- 6. Increase LVL -->
          <div class="upgrade-card" data-upgrade-id="increase-lvl">
            <div class="upgrade-top">
              <div class="upgrade-sprite-wrapper">
                <img src="../IMG/upgrades/increase_lvl.png" alt="Increase LVL" class="upgrade-sprite">
              </div>
              <div class="upgrade-button-wrapper">
                <button class="upgrade-button" data-upgrade-id="increase-lvl">Upgrade: $10</button>
              </div>
            </div>
            <div class="upgrade-bottom">
              <h3>Increase LVL</h3>
              <p class="upgrade-desc">
                Increases the bugs spawn rate, unlocks the next tier of upgrades and weapons, and invites your impending
                doom...
              </p>
            </div>
          </div>
        </div>
      </aside>

    </main>
  </div>

  <!--Ability tooltip pop-up-->
  <div id="ability-tooltip"></div>
  <!--Upgrade tooltip pop-up-->
  <div id="upgrade-tooltip"></div>

  <!-- Journal Screen -->
  <div id="journal-screen" class="overlay-panel">
    <div class="panel-content">
      <h2>Journal</h2>
      <p>Here you‚Äôll eventually see entries about:</p>
      <ul>
        <li>Bugs you‚Äôve discovered</li>
        <li>Weapons you‚Äôve unlocked</li>
        <li>Upgrades and milestones</li>
      </ul>

      <section class="journal-section">
        <h3>Bug Log (Placeholder)</h3>
        <p>ü™∞ Example Bug: ‚ÄúCommon Housefly‚Äù ‚Äì weak, appears early, low reward.</p>
      </section>

      <section class="journal-section">
        <h3>Weapons (Placeholder)</h3>
        <p>üßπ Basic Swatter ‚Äì your starting weapon. Reliable, but basic.</p>
      </section>

      <section class="journal-section">
        <h3>Upgrades (Placeholder)</h3>
        <p>‚¨ÜÔ∏è Damage Boost I ‚Äì increases damage by 10%.</p>
      </section>

      <button class="close-btn" id="close-journal">Close</button>
    </div>
  </div>

  <!-- About Us Screen -->
  <div id="about-screen" class="overlay-panel">
    <div class="panel-content">
      <h2>About DeBugger</h2>
      <p>DeBugger was developed by:</p>
      <ul>
        <li><strong>Andrew Boland</strong> (aaboland@usca.edu) - Team Leader</li>
        <li><strong>Evan McLeod</strong> (em127@usca.edu) - Lead Artist</li>
        <li><strong>Judah Owen</strong> (jdowen@usca.edu) - Lead Developer</li>
      </ul>
      <p>Project Description: Implement a web-based bug clicker game where players
        earn money by "swatting" randomly appearing bugs.
      </p>
      <p><strong>How to DeBug:</strong>
      <p>Click on bugs as they appear to DeBug them and earn money. Use the money to upgrade your
        tools and abilities to handle more challenging bugs. When you're ready, or when you run out
        of upgrades to unlock, increase the level to face tougher challenges and unlock the next tier.</p>
      </p>
      <p>Can you survive the onslaught?</p>
      <p><strong>Get DeBuggin'!</strong></p>
      <button class="close-btn" id="close-about">Close</button>
    </div>
  </div>

  <!-- Options Screen -->
  <div id="options-screen" class="overlay-panel">
    <div class="panel-content">
      <h2>Options</h2>

      <div class="option-row">
        <label for="music-volume">Music Volume</label>
        <input type="range" id="music-volume" min="0" max="100" value="70">
      </div>

      <div class="option-row">
        <label for="sfx-volume">SFX Volume</label>
        <input type="range" id="sfx-volume" min="0" max="100" value="80">
      </div>

      <p class="option-note">(Sliders are visual for now ‚Äî we‚Äôll hook them to real audio later.)</p>

      <button class="close-btn" id="close-options">Close</button>
    </div>
  </div>

  <!-- Pause Screen -->
  <div id="pause-screen" class="overlay-panel">
    <div class="panel-content pause-content">
      <img src="../IMG/menu/Paused.png" alt="Paused" class="overlay-title-img">

      <div class="pause-buttons">
        <button id="btn-rebug" class="overlay-button">
          <img src="../IMG/menu/Rebug.png" alt="Rebug" class="overlay-button-img">
        </button>
        <!--<button id="btn-pause-journal" class="overlay-button">
          <img src="../IMG/menu/Journal.png" alt="" class="overlay-button-img">
        </button>-->
        <button id="btn-quit" class="overlay-button">
          <img src="../IMG/menu/Quit.png" alt="Quit" class="overlay-button-img">
        </button>
      </div>
    </div>
  </div>

  <!-- Bugged Game Over Screen -->
  <div id="bugged-screen" class="overlay-panel">
    <div class="panel-content bugged-content">

      <div id="bugged-score-row">
        <img src="../IMG/menu/Score.png" alt="Score" class="bugged-score-label">
        <span class="bugged-score-separator">:</span>
        <span id="bugged-score-value" class="bugged-score-value">0</span>
      </div>

      <h2>You've been Bugged!</h2>
      <p>You have failed as a DeBugger.</p>
      <p>But don't worry, you can <strong>REBUG</strong> the game and try again!</p>
      <p>Or you can <strong>Quit</strong> like a coward.</p>

      <div class="bugged-buttons">
        <button id="btn-rebug-gameover" class="overlay-button">
          <img src="../IMG/menu/Rebug.png" alt="Rebug" class="overlay-button-img">
        </button>
        <button id="btn-quit-from-bugged" class="overlay-button">
          <img src="../IMG/menu/Quit.png" alt="Quit" class="overlay-button-img">
        </button>
      </div>
    </div>
  </div>

  <!-- Leaderboard Screen -->
  <div id="leaderboard-screen" class="overlay-panel">
    <div class="panel-content leaderboard-content">
      <img src="../IMG/ui/leaderboard_title.png" alt="" class="overlay-title-img">

      <table id="leaderboard-list" class="ranking-list">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td id="player1-name">Player1</td>
            <td id="player1-score">1500</td>
          </tr>
          <tr>
            <td>2</td>
            <td id="player2-name">Player2</td>
            <td id="player2-score">1200</td>
          </tr>
          <tr>
            <td>3</td>
            <td id="player3-name">Player3</td>
            <td id="player3-score">1000</td>
          </tr>
          <tr>
            <td>4</td>
            <td id="player4-name">Player4</td>
            <td id="player4-score">800</td>
          </tr>
          <tr>
            <td>5</td>
            <td id="player5-name">Player5</td>
            <td id="player5-score">600</td>
          </tr>
          <tr>
            <td>6</td>
            <td id="player6-name">Player6</td>
            <td id="player6-score">500</td>
          </tr>
          <tr>
            <td>7</td>
            <td id="player7-name">Player7</td>
            <td id="player7-score">400</td>
          </tr>
          <tr>
            <td>8</td>
            <td id="player8-name">Player8</td>
            <td id="player8-score">300</td>
          </tr>
          <tr>
            <td>9</td>
            <td id="player9-name">Player9</td>
            <td id="player9-score">200</td>
          </tr>
          <tr>
            <td>10</td>
            <td id="player10-name">Player10</td>
            <td id="player10-score">100</td>
          </tr>
        </tbody>
      </table>

      <button class="close-btn" id="close-leaderboard">Close</button>
    </div>
  </div>

  <!-- Scripts of JS files -->
  <script src="../JS/bugs.js"></script>
  <script src="../JS/weapons.js"></script>
  <script src="../JS/powerups.js"></script>
  <script src="../JS/game.js"></script>


  <!-- Firebase Database -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js';
    // Add Firebase products that you want to use
    import { getAuth } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js';
    import { getFirestore, onSnapshot, collection, addDoc, query, orderBy, limit } from 'https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js';


    const firebaseConfig = {
      apiKey: "AIzaSyCj56GT533SFfRFZUfZ3ZTrBMVVQBPsrcw",
      authDomain: "owendatabase2025.firebaseapp.com",
      projectId: "owendatabase2025",
      storageBucket: "owendatabase2025.firebasestorage.app",
      messagingSenderId: "255375433561",
      appId: "1:255375433561:web:2c88349ef48e8493fef648",
      measurementId: "G-TSJTVN6ZBP"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const quancollection = collection(db, 'DeBugger');

    //addDoc(quancollection, {
      //name: "Test Player",
      //score: 989
    //});

    const q = query(quancollection, orderBy("score", "desc"), limit(10));
    onSnapshot(q, (querySnapshot) => {
      const leaderboard = [];
      querySnapshot.forEach((doc) => {
        leaderboard.push(doc.data());
      });
      console.log("Current leaderboard: ", leaderboard);

    });
  </script>

</body>

</html>